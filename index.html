<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYBER DEFUSAL</title>
    <!-- Load React -->
    <script src="[https://unpkg.com/react@18/umd/react.production.min.js](https://unpkg.com/react@18/umd/react.production.min.js)"></script>
    <script src="[https://unpkg.com/react-dom@18/umd/react-dom.production.min.js](https://unpkg.com/react-dom@18/umd/react-dom.production.min.js)"></script>
    <!-- Load Babel for JSX -->
    <script src="[https://unpkg.com/@babel/standalone/babel.min.js](https://unpkg.com/@babel/standalone/babel.min.js)"></script>
    <!-- Load Tailwind CSS for styling -->
    <script src="[https://cdn.tailwindcss.com](https://cdn.tailwindcss.com)"></script>
    <!-- Load Icons -->
    <script src="[https://unpkg.com/lucide@latest](https://unpkg.com/lucide@latest)"></script>
</head>
<body class="bg-slate-900 text-white">
    <div id="root"></div>

    <script type="text/babel">
        // PASTE THE REACT CODE GENERATED BY THE AI HERE
        // (Copy everything from the "App.jsx" file block provided in the chat
        // and paste it right here between these script tags!)
        import React, { useState, useEffect, useRef } from 'react';
import { Terminal, Scissors, Lock, AlertTriangle, ShieldCheck, Skull, Activity, Play, RefreshCw } from 'lucide-react';

// --- STYLES (Tailwind classes are used in the render, but we define some constants here) ---
const COLORS = {
  bg: "bg-slate-900",
  panel: "bg-slate-800",
  text: "text-slate-100",
  accent: "text-cyan-400",
  danger: "text-red-500",
  success: "text-green-500",
  border: "border-slate-700",
};

export default function App() {
  const [gameState, setGameState] = useState('menu'); // menu, playing, won, lost
  const [timeLeft, setTimeLeft] = useState(300); // 5 minutes
  const [strikes, setStrikes] = useState(0);
  
  // Modules State
  const [codeModuleSolved, setCodeModuleSolved] = useState(false);
  const [wireModuleSolved, setWireModuleSolved] = useState(false);
  const [terminalModuleSolved, setTerminalModuleSolved] = useState(false);

  // Timer Logic
  useEffect(() => {
    let interval;
    if (gameState === 'playing' && timeLeft > 0) {
      interval = setInterval(() => {
        setTimeLeft((prev) => prev - 1);
      }, 1000);
    } else if (timeLeft === 0 && gameState === 'playing') {
      setGameState('lost');
    }
    return () => clearInterval(interval);
  }, [gameState, timeLeft]);

  // Check Win Condition
  useEffect(() => {
    if (codeModuleSolved && wireModuleSolved && terminalModuleSolved) {
      setGameState('won');
    }
  }, [codeModuleSolved, wireModuleSolved, terminalModuleSolved]);

  // Check Lose Condition (Strikes)
  useEffect(() => {
    if (strikes >= 3) {
      setGameState('lost');
    }
  }, [strikes]);

  const handleStrike = () => {
    setStrikes(s => s + 1);
    // Speed up timer penalty
    setTimeLeft(t => Math.max(0, t - 30));
  };

  const resetGame = () => {
    setGameState('menu');
    setTimeLeft(300);
    setStrikes(0);
    setCodeModuleSolved(false);
    setWireModuleSolved(false);
    setTerminalModuleSolved(false);
  };

  // --- RENDER HELPERS ---
  const formatTime = (seconds) => {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
  };

  return (
    <div className={`min-h-screen ${COLORS.bg} ${COLORS.text} font-mono p-4 md:p-8 flex flex-col items-center justify-center selection:bg-cyan-500 selection:text-black overflow-hidden relative`}>
      
      {/* BACKGROUND GRID EFFECT */}
      <div className="absolute inset-0 opacity-10 pointer-events-none" 
           style={{backgroundImage: 'linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px)', backgroundSize: '20px 20px'}}>
      </div>

      {/* --- MENU SCREEN --- */}
      {gameState === 'menu' && (
        <div className="max-w-2xl w-full bg-slate-800/90 border border-cyan-500/30 p-8 rounded-xl shadow-2xl backdrop-blur-sm text-center animate-in fade-in zoom-in duration-500">
          <Activity className="w-20 h-20 text-cyan-400 mx-auto mb-6 animate-pulse" />
          <h1 className="text-5xl font-bold mb-4 tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-600">
            PROJECT: LOGIC BOMB
          </h1>
          <p className="text-xl text-slate-400 mb-8">
            Cybersecurity Defusal Simulation v1.0
          </p>
          <div className="bg-slate-900/50 p-6 rounded-lg text-left mb-8 border border-slate-700">
            <h3 className="text-lg font-bold text-cyan-400 mb-2">MISSION BRIEFING:</h3>
            <ul className="list-disc pl-5 space-y-2 text-slate-300">
              <li>A digital logic bomb has been planted on the server.</li>
              <li>You have <strong>5 minutes</strong> to bypass the security layers.</li>
              <li>There are <strong>3 modules</strong> protecting the core.</li>
              <li><strong>3 Strikes</strong> results in immediate system failure.</li>
            </ul>
          </div>
          <button 
            onClick={() => setGameState('playing')}
            className="group relative inline-flex items-center justify-center px-8 py-4 text-lg font-bold text-white transition-all duration-200 bg-cyan-600 font-lg rounded-full hover:bg-cyan-500 hover:shadow-[0_0_20px_rgba(6,182,212,0.5)] active:scale-95"
          >
            <Play className="w-5 h-5 mr-2 fill-current" />
            INITIALIZE SEQUENCE
          </button>
        </div>
      )}

      {/* --- GAME OVER SCREEN (EXPLOSION) --- */}
      {gameState === 'lost' && (
        <div className="fixed inset-0 z-50 bg-black flex flex-col items-center justify-center">
          <img 
            src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExdHVzejkyMnZjN2FqeTVlZHZ4a3c2ZzFqbWxnODQ0NGgycGhhOTlwcyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/NgXOiQMrpnwlvAUHPa/giphy.gif" 
            alt="EXPLOSION" 
            className="w-full h-full object-cover opacity-80"
          />
          <div className="absolute inset-0 flex flex-col items-center justify-center">
            <h1 className="text-8xl font-black text-red-600 mb-4 animate-bounce tracking-widest uppercase drop-shadow-[0_5px_5px_rgba(0,0,0,1)]">
              FATAL ERROR
            </h1>
            <p className="text-2xl text-white font-bold bg-black/50 px-4 py-2 rounded mb-8">
              SYSTEM DESTROYED
            </p>
            <button 
              onClick={resetGame}
              className="px-6 py-3 bg-red-600 hover:bg-red-500 text-white rounded font-bold transition-colors flex items-center"
            >
              <RefreshCw className="w-5 h-5 mr-2" />
              REBOOT SYSTEM
            </button>
          </div>
        </div>
      )}

      {/* --- WIN SCREEN --- */}
      {gameState === 'won' && (
        <div className="max-w-2xl w-full bg-slate-800 border border-green-500 p-12 rounded-xl shadow-[0_0_50px_rgba(34,197,94,0.3)] text-center animate-in zoom-in duration-300">
          <ShieldCheck className="w-24 h-24 text-green-500 mx-auto mb-6" />
          <h1 className="text-6xl font-bold text-green-500 mb-4 tracking-tighter">
            THREAT NEUTRALIZED
          </h1>
          <p className="text-2xl text-slate-300 mb-8">
            System Secured. Great work, Operator.
          </p>
          <div className="text-slate-400 mb-8">
             Time Remaining: <span className="text-green-400 font-bold font-mono text-xl">{formatTime(timeLeft)}</span>
          </div>
          <button 
            onClick={resetGame}
            className="px-8 py-4 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-bold transition-colors border border-slate-600"
          >
            PLAY AGAIN
          </button>
        </div>
      )}

      {/* --- MAIN GAME HUD --- */}
      {gameState === 'playing' && (
        <div className="w-full max-w-6xl animate-in slide-in-from-bottom-10 duration-500">
          
          {/* HEADER: TIMER & STRIKES */}
          <header className="flex flex-col md:flex-row items-center justify-between bg-slate-800/90 border-b-4 border-slate-900 p-6 rounded-t-xl mb-6 shadow-lg relative overflow-hidden">
             {/* Decorative red flash if time is low */}
             {timeLeft < 60 && <div className="absolute inset-0 bg-red-500/10 animate-pulse pointer-events-none"></div>}
             
             <div className="flex items-center space-x-4 z-10">
               <div className="bg-black/40 p-2 rounded border border-slate-700">
                 <span className="text-xs text-slate-500 block uppercase tracking-wider">Session ID</span>
                 <span className="font-mono text-cyan-500">#AF-992-K</span>
               </div>
             </div>

             <div className="flex flex-col items-center z-10 my-4 md:my-0">
               <div className={`text-7xl font-black font-mono tracking-widest drop-shadow-[0_0_10px_rgba(255,255,255,0.2)] ${timeLeft < 60 ? 'text-red-500 animate-pulse' : 'text-slate-100'}`}>
                 {formatTime(timeLeft)}
               </div>
               <div className="text-xs tracking-[0.5em] text-slate-500 uppercase mt-1">Countdown Sequence</div>
             </div>

             <div className="flex items-center space-x-2 z-10">
               <div className="flex flex-col items-end">
                 <span className="text-xs text-red-500 font-bold uppercase tracking-wider mb-1">Strike Level</span>
                 <div className="flex space-x-2">
                   {[...Array(3)].map((_, i) => (
                     <div key={i} className={`w-8 h-8 rounded border-2 flex items-center justify-center transition-all duration-300 ${i < strikes ? 'bg-red-600 border-red-500 shadow-[0_0_15px_rgba(220,38,38,0.8)]' : 'bg-slate-900 border-slate-700'}`}>
                       {i < strikes && <Skull className="w-5 h-5 text-white" />}
                     </div>
                   ))}
                 </div>
               </div>
             </div>
          </header>

          {/* MODULE GRID */}
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            
            {/* MODULE 1: THE KEYPAD (Inspect Element) */}
            <Module1_Keypad 
              solved={codeModuleSolved} 
              onSolve={() => setCodeModuleSolved(true)} 
              onStrike={handleStrike}
            />

            {/* MODULE 2: THE WIRES (Logic) */}
            <Module2_Wires 
              solved={wireModuleSolved} 
              onSolve={() => setWireModuleSolved(true)} 
              onStrike={handleStrike}
            />

            {/* MODULE 3: THE TERMINAL (SQL Injection Sim) */}
            <Module3_Terminal 
              solved={terminalModuleSolved} 
              onSolve={() => setTerminalModuleSolved(true)} 
              onStrike={handleStrike}
            />

          </div>
        </div>
      )}
    </div>
  );
}

// --- SUB-COMPONENTS (THE PUZZLES) ---

function ModuleWrapper({ title, icon: Icon, solved, children }) {
  return (
    <div className={`relative overflow-hidden rounded-xl border-2 transition-all duration-500 ${solved ? 'bg-slate-900 border-green-500 opacity-50 grayscale' : 'bg-slate-800 border-slate-600 shadow-xl'}`}>
      {solved && (
        <div className="absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-[1px]">
          <div className="bg-green-500 text-black font-bold px-4 py-2 rounded rotate-[-10deg] border-4 border-green-700 shadow-lg text-xl uppercase tracking-widest">
            Defused
          </div>
        </div>
      )}
      <div className="bg-slate-900/80 p-3 border-b border-slate-700 flex items-center justify-between">
        <div className="flex items-center space-x-2">
          <Icon className={`w-5 h-5 ${solved ? 'text-green-500' : 'text-cyan-400'}`} />
          <span className="font-bold text-slate-200 tracking-wider text-sm uppercase">{title}</span>
        </div>
        <div className={`w-3 h-3 rounded-full ${solved ? 'bg-green-500' : 'bg-amber-500 animate-pulse'}`}></div>
      </div>
      <div className="p-6">
        {children}
      </div>
    </div>
  );
}

// PUZZLE 1: HIDDEN CODE
// The user must inspect element to find the code in the HTML comment
function Module1_Keypad({ solved, onSolve, onStrike }) {
  const [input, setInput] = useState('');
  
  // This is the "Secret" embedded in the render for them to find
  // We use a style that hides it visually but keeps it in DOM
  
  const handleSubmit = (e) => {
    e.preventDefault();
    if (input === '7359') {
      onSolve();
    } else {
      onStrike();
      setInput('');
    }
  };

  return (
    <ModuleWrapper title="Secure Access" icon={Lock} solved={solved}>
      <p className="text-sm text-slate-400 mb-4">
        <strong>Task:</strong> Retrieve the 4-digit PIN. <br/>
        <span className="text-xs text-slate-500">Hint: Hackers look *inside* the elements (F12).</span>
      </p>
      
      {/* THE SECRET CODE HIDDEN HERE */}
      <span style={{ display: 'none' }} id="secret-pin-code" data-code="7359">
        SECRET_AGENT_CODE_IS_7359
      </span>
      <div className="sr-only">Password is 7359</div>

      <form onSubmit={handleSubmit} className="flex flex-col space-y-3">
        <input 
          type="text" 
          maxLength={4}
          value={input}
          onChange={(e) => setInput(e.target.value.replace(/[^0-9]/g, ''))}
          placeholder="----"
          className="bg-black border border-slate-600 text-center text-3xl font-mono text-cyan-400 py-3 tracking-[1em] focus:outline-none focus:border-cyan-500 rounded"
          disabled={solved}
        />
        <div className="grid grid-cols-3 gap-2">
          {[1,2,3,4,5,6,7,8,9].map(n => (
            <button 
              key={n}
              type="button"
              onClick={() => !solved && setInput(p => (p + n).slice(0, 4))}
              className="bg-slate-700 hover:bg-slate-600 text-slate-200 py-2 rounded font-mono transition-colors disabled:opacity-50"
              disabled={solved}
            >
              {n}
            </button>
          ))}
          <button type="button" onClick={() => setInput('')} className="bg-red-900/50 text-red-200 py-2 rounded disabled:opacity-50" disabled={solved}>CLR</button>
          <button type="button" onClick={() => !solved && setInput(p => (p + '0').slice(0, 4))} className="bg-slate-700 text-slate-200 py-2 rounded disabled:opacity-50" disabled={solved}>0</button>
          <button type="submit" className="bg-cyan-700 hover:bg-cyan-600 text-white py-2 rounded font-bold disabled:opacity-50" disabled={solved}>ENT</button>
        </div>
      </form>
    </ModuleWrapper>
  );
}

// PUZZLE 2: WIRES
// Logic puzzle: "Cut the blue wire if the red wire is present"
function Module2_Wires({ solved, onSolve, onStrike }) {
  // We'll generate a static puzzle for simplicity
  // Wires: Red, Blue, Green, Yellow, Black
  // Rule: Cut ONLY Green and Black. Touching Red causes strike.
  
  const [cutWires, setCutWires] = useState([]);
  
  const wires = [
    { color: 'red', label: 'R', safe: false },
    { color: 'blue', label: 'B', safe: false },
    { color: 'green', label: 'G', safe: true },
    { color: 'yellow', label: 'Y', safe: false },
    { color: 'black', label: 'K', safe: true },
  ];

  const handleCut = (wire) => {
    if (solved || cutWires.includes(wire.color)) return;
    
    setCutWires([...cutWires, wire.color]);
    
    if (!wire.safe) {
      onStrike();
    } else {
      // Check if all safe wires are cut
      const safeWires = wires.filter(w => w.safe).map(w => w.color);
      const newCuts = [...cutWires, wire.color];
      const allSafeCut = safeWires.every(c => newCuts.includes(c));
      
      if (allSafeCut) {
        onSolve();
      }
    }
  };

  return (
    <ModuleWrapper title="Physical Connection" icon={Scissors} solved={solved}>
      <p className="text-sm text-slate-400 mb-4">
        <strong>Task:</strong> Cut the wires powering the detonator. <br/>
        <span className="text-xs text-yellow-500 font-mono block mt-2 p-2 bg-yellow-900/20 border border-yellow-700/50 rounded">
          NOTE: Intelligence suggests the device runs on <span className="text-green-400">Green</span> earth and <span className="text-white">Black</span> ground. Anything else is live.
        </span>
      </p>
      
      <div className="flex flex-col space-y-4 items-center justify-center p-4 bg-black/20 rounded-lg">
        {wires.map((wire) => {
          const isCut = cutWires.includes(wire.color);
          const colorMap = {
            red: 'bg-red-500',
            blue: 'bg-blue-500',
            green: 'bg-green-500',
            yellow: 'bg-yellow-400',
            black: 'bg-slate-200'
          };
          
          return (
            <div key={wire.color} className="flex items-center w-full group relative">
              <div className="w-4 h-4 rounded-full bg-slate-600 border border-slate-500"></div>
              
              {/* The Wire */}
              <div className={`h-2 flex-grow mx-1 relative ${isCut ? 'opacity-50' : ''}`}>
                 {/* Left part */}
                 <div className={`absolute left-0 top-0 bottom-0 ${colorMap[wire.color]} ${isCut ? 'w-[40%]' : 'w-full'} rounded shadow-sm z-10`}></div>
                 {/* Right part (if cut) */}
                 {isCut && <div className={`absolute right-0 top-0 bottom-0 ${colorMap[wire.color]} w-[40%] rounded shadow-sm z-10`}></div>}
                 {/* Inner copper (shown if cut) */}
                 <div className="absolute inset-0 bg-orange-700 w-full transform scale-y-50"></div>
              </div>

              <div className="w-4 h-4 rounded-full bg-slate-600 border border-slate-500"></div>
              
              {!isCut && !solved && (
                <button 
                  onClick={() => handleCut(wire)}
                  className="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 bg-slate-800 text-white px-2 py-1 text-xs rounded border border-slate-600 shadow-lg hover:bg-red-600 transition-all"
                >
                  CUT
                </button>
              )}
            </div>
          );
        })}
      </div>
    </ModuleWrapper>
  );
}

// PUZZLE 3: TERMINAL
// Basic SQL Injection concept: enter specific bypass string
function Module3_Terminal({ solved, onSolve, onStrike }) {
  const [history, setHistory] = useState([
    { text: "System initialized...", type: 'info' },
    { text: "Password required for root access.", type: 'warn' }
  ]);
  const [cmd, setCmd] = useState('');
  const bottomRef = useRef(null);

  useEffect(() => {
    bottomRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, [history]);

  const handleCommand = (e) => {
    e.preventDefault();
    if (!cmd.trim()) return;

    const newHistory = [...history, { text: `> ${cmd}`, type: 'user' }];
    
    // Simple logic: Looking for SQL injection style bypass
    // correct answer: anything containing " OR 1=1"
    const lowerCmd = cmd.toLowerCase();
    
    if (lowerCmd.includes("' or 1=1") || lowerCmd.includes('" or 1=1') || cmd === "admin") {
      newHistory.push({ text: "Access Granted. Root privileges restored.", type: 'success' });
      setHistory(newHistory);
      setCmd('');
      onSolve();
    } else if (lowerCmd === "help") {
      newHistory.push({ text: "HINT: The authentication query is vulnerable. Try to make the statement always true.", type: 'info' });
      setHistory(newHistory);
      setCmd('');
    } else {
      newHistory.push({ text: "Access Denied. Invalid credentials.", type: 'error' });
      setHistory(newHistory);
      setCmd('');
      onStrike();
    }
  };

  return (
    <ModuleWrapper title="Mainframe Access" icon={Terminal} solved={solved}>
       <div className="bg-black rounded-lg p-4 font-mono text-sm h-64 flex flex-col border border-slate-700 shadow-inner">
         <div className="flex-grow overflow-y-auto space-y-1 scrollbar-hide">
           {history.map((line, i) => (
             <div key={i} className={`${
               line.type === 'error' ? 'text-red-500' : 
               line.type === 'success' ? 'text-green-400' : 
               line.type === 'user' ? 'text-cyan-300' : 
               line.type === 'warn' ? 'text-yellow-400' : 'text-slate-400'
             }`}>
               {line.text}
             </div>
           ))}
           <div ref={bottomRef}></div>
         </div>
         <form onSubmit={handleCommand} className="mt-2 flex border-t border-slate-800 pt-2">
           <span className="text-green-500 mr-2">$</span>
           <input 
             type="text" 
             value={cmd}
             onChange={e => setCmd(e.target.value)}
             className="bg-transparent border-none outline-none text-slate-200 flex-grow"
             placeholder="Enter password..."
             autoFocus
             disabled={solved}
           />
         </form>
       </div>
    </ModuleWrapper>
  );
}
        // At the very bottom of the script, add this line to start the app:
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
